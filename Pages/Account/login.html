<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="../../Assets/CSS/login.css">
  <title>
    Login page
  </title>
  <link rel="icon" type="image" href="../../Assets/Images/BIKERZ ZONE.png">
</head>

<body>
  <div class="login">
    <h2>Login</h2>
    <form>
      <div class="inputs">
        <input id="username" type="text" name="Username" required>
        <label for="username">Username</label>
      </div>
      <div class="inputs">
        <input id="password" type="password" name="Password" required>
        <label for="password">Password</label>
      </div><br>
      <div class="remember">
        <input id="remember" type="checkbox" name="checkbox">
        <label for="remember"> Remember me</label>
      </div>
      <button id="btn" onclick="login()"> Log In </button>
      <a id="new-acc" href="../../Pages/Account/signup.html"> Create a New Account</a>
    </form>
  </div>
</body>
<script>

  function login() {

    let user = {};
    let user_List = [];
    user["username"] = document.getElementById("username").value;
    user["password"] = document.getElementById("password").value;
    user_List.push(user);
    // localStorage.setItem("user", JSON.stringify(user_List))
    // localStorage.getItem("user_details")
    let record = JSON.parse(localStorage.getItem("User List")) || [];
    record.push(user);
    localStorage.setItem("User List", JSON.stringify(record));

  }

  const loginpage = document.getElementById("loginform");

  loginpage.onsubmit = e => {

    e.preventDefault();

    const emailInput = loginpage["email"].value;
    const passwordInput = loginpage["password"].value;
    let usersdata = JSON.parse(localStorage.getItem("users"));

    if (!usersdata) {
      alert("Login Failure");
      return;
    }

    let Success;
    for (let i = 0; i < usersdata.length; i++) {
      if (usersdata[i].email === emailInput && usersdata[i].password === passwordInput) {
        Success = true;
        break;
      }
    }

    if (Success) {
      alert("Login Success");
    } else {
      alert("Login Failure");
    }
  } 
</script>

</html>