<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../Assets/CSS/profile.css">
    <title>Profile</title>
    <link rel="icon" type="image" href="../../Assets/Images/BIKERZ ZONE.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous" />
</head>

<body>





    <!--Navigations-->
    <header>
        <div class="nav">
            <a href="../../index.html"><img id="logo" src="../../Assets/Images/BIKERZ_ZONE-removebg-preview.png"
                    alt="logo"></a>

            <div class="options">
                <a class="a1" href="../Buy Bike/newold.html">Buy Bike</a>
                <a class="a1" href="../Sell Bike/sbike-details.html">Sell Bike</a>
                <a class="a1" href="../review.html">Review of Bike</a>
                <a class="a1" href="../Price List/price.html">Price List of Bike</a>
                <a class="a1" href="../About/About.html">About</a>
                <a class="a1" href="../Account/signup.html">Signup/login</a>
            </div>
        </div>
    </header>



    <!-- <div class="page-content page-container" id="page-content">
        <div class="padding">
            <div class="row container d-flex justify-content-center">
                <div class="col-xl-6 col-md-12">
                    <div class="card user-card-full">
                        <div class="row m-l-0 m-r-0">
                            <div class="col-sm-4 bg-c-lite-green user-profile">
                                <div class="card-block text-center text-white">
                                    <div class="m-b-25">
                                        <img src="https://img.icons8.com/bubbles/100/000000/user.png" class="img-radius"
                                            alt="User-Profile-Image">
                                    </div>
                                    <h6 class="f-w-600"><span id="username"></span></h6>
                                    <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <div class="card-block">
                                    <h6 class="m-b-20 p-b-5 b-b-default f-w-600"><span id="info">Information</span></h6>
                                    <div class="row">


                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">username</p>
                                            <h6 class="text-muted f-w-400" id="username"></h6>
                                        </div>


                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">Phone</p>
                                            <h6 class="text-muted f-w-400" id="ph_no"></h6>
                                        </div>


                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">Email</p>
                                            <h6 class="text-muted f-w-400" id="email"></h6>
                                        </div>


                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600">Phone</p>
                                            <h6 class="text-muted f-w-400"></h6>
                                        </div>


                                        <div class="col-sm-6">
                                            <a href="../Account/login.html" class="m-b-10 f-w-600">Log out</a>
                                            <h6 class="text-muted f-w-400"></h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> -->

    <div class="page-content page-container" id="page-content">
        <div class="padding">
            <div class="row container d-flex justify-content-center">
                <div class="col-xl-6 col-md-12">
                    <div class="card user-card-full">
                        <div class="row m-l-0 m-r-0">
                            <div class="col-sm-4 bg-c-lite-green user-profile">
                                <div class="card-block text-center text-white">
                                    <div class="m-b-25">
                                        <img src="https://img.icons8.com/bubbles/100/000000/user.png" class="img-radius"
                                            alt="User-Profile-Image">
                                    </div>
                                    <h6 class="f-w-600 name" id="username"></h6>
                                    <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                                </div>
                            </div>
                            <!-- <form> -->
                            <div class="col-sm-8">
                                <div class="card-block">
                                    <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Information</h6>
                                    <div class="row">
                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600" id="line">Name</p>
                                            <input class="text-muted f-w-400" id="username" disabled="true">
                                        </div>
                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600" id="line">Email</p>
                                            <input class="text-muted f-w-400" id="email" type="email" disabled="true">
                                        </div>
                                        <div class="col-sm-6">
                                            <p class="m-b-10 f-w-600" id="line">Phone</p>
                                            <input class="text-muted f-w-400" id="ph_no" pattern="[0-9]{10,10}"
                                                minlength="10" maxlength="10" disabled="true">
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <button class="m-b-10 f-w-600 logout" id="deleteButton"
                                        onclick="deleteItem()">Delete</button>
                                    <h6 class="text-muted f-w-400"></h6>
                                </div>
                                <button onclick="edit()">Edit</button>
                                <button id="save">Save</button>
                            </div>
                            <!-- </form> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

<script>

    let users = JSON.parse(localStorage.getItem('user_signup_list'));

    const username = document.querySelectorAll("#username")
    const phone = document.getElementById("ph_no")
    const email_name = document.getElementById("email");

    let profile_arr = JSON.parse(localStorage.getItem("profile_details"));

    let check;

    users.find(userobj => {
        if (userobj["email"] == profile_arr["email"] && userobj["password"] == profile_arr["password"]) {
            username[0].innerHTML = userobj["username"]
            username[1].value = userobj["username"]
            phone.value = userobj["ph_no"]
            email_name.value = userobj["email"]
            return check = userobj;
        }
    })

    function edit() {
        document.querySelectorAll("#username")[1].disabled = false;
        document.getElementById("ph_no").disabled = false;
    }


    document.getElementById("save").addEventListener("click", (e) => {

        check["username"] = document.querySelectorAll("#username")[0].value;
        check["username"] = document.querySelectorAll("#username")[1].value;
        check["ph_no"] = document.getElementById("ph_no").value;

        console.log(check)

        localStorage.setItem("user_signup_list", JSON.stringify(users));

        console.log(users);

        document.querySelectorAll("#username")[1].disabled = true;
        document.getElementById("ph_no").disabled = true;
    })

    function deleteItem() {
        for (let i = 0; i < users.length; i++) {
            if (document.getElementById("email").value == users[i]["email"]) {

                // confirm("Vrooo.. Log out pannavaa?ðŸ¥º")
                let msg = confirm("Do you want to delete your account?")

                if (msg != true) {
                    return false;
                } else {
                    users.splice(i, 1)
                    
                    localStorage.setItem("user_signup_list", JSON.stringify(users));

                    window.location.href = "login.html";
                }

            }
        }
    }



</script>

</html>